# 컴퓨터 구조와 시스템 호출

## 컴퓨터 구조 (Computer Architecture)

컴퓨터 구조는 컴퓨터 시스템의 하드웨어와 소프트웨어 구성 요소들이 어떻게 상호작용하는지를 정의하는 청사진입니다. 이는 컴퓨터의 내부 동작 원리와 각 구성 요소들의 역할을 이해하는 핵심적인 개념입니다.

### CPU (Central Processing Unit)

CPU는 컴퓨터의 두뇌 역할을 하는 핵심 처리 장치입니다. 명령어를 해석하고 실행하며, 산술 논리 연산을 수행합니다. CPU는 제어 장치(Control Unit), 산술 논리 장치(ALU), 그리고 레지스터들로 구성됩니다.

**명령어 실행 사이클**은 인출(Fetch) → 해독(Decode) → 실행(Execute) → 저장(Store)의 단계를 반복합니다. 이 과정에서 CPU는 메모리에서 명령어를 가져와 해석하고, 필요한 연산을 수행한 후 결과를 저장합니다.

### 메모리 시스템

메모리는 계층적 구조로 설계되어 있습니다. **레지스터**는 CPU 내부의 가장 빠른 저장소이며, **캐시 메모리**는 자주 사용되는 데이터를 임시 저장합니다. **주 메모리(RAM)**는 현재 실행 중인 프로그램과 데이터를 저장하고, **보조 저장장치**는 영구적인 데이터 저장을 담당합니다.

캐시 메모리는 L1, L2, L3로 구분되며, 각각 속도와 용량의 트레이드오프 관계를 가집니다. 지역성의 원리에 따라 최근에 사용된 데이터나 인접한 데이터에 빠르게 접근할 수 있도록 설계됩니다.

### 입출력 시스템

입출력 시스템은 컴퓨터와 외부 장치 간의 데이터 교환을 관리합니다. **프로그램 입출력 방식**은 CPU가 직접 입출력을 제어하는 방식이고, **인터럽트 방식**은 입출력 완료 시 CPU에 알림을 보내는 방식입니다. **DMA(Direct Memory Access)**는 CPU의 개입 없이 메모리와 입출력 장치 간 직접 데이터 전송을 가능하게 합니다.

### 버스 시스템

버스는 컴퓨터 내부 구성 요소들을 연결하는 통로입니다. **데이터 버스**는 실제 데이터를 전송하고, **주소 버스**는 메모리 위치를 지정하며, **제어 버스**는 동작을 제어하는 신호를 전달합니다.

## 시스템 호출 (System Call)

시스템 호출은 사용자 프로그램이 운영체제의 서비스를 요청하는 인터페이스입니다. 이는 사용자 모드와 커널 모드 간의 안전한 전환을 통해 하드웨어 자원에 접근할 수 있게 해줍니다.

### 시스템 호출의 필요성

현대 운영체제는 **보호 모드**를 사용하여 시스템의 안정성과 보안을 보장합니다. 사용자 프로그램은 제한된 권한으로 실행되며, 하드웨어 자원에 직접 접근할 수 없습니다. 시스템 호출을 통해서만 파일 시스템, 네트워크, 프로세스 관리 등의 운영체제 서비스를 이용할 수 있습니다.

### 시스템 호출 동작 과정

시스템 호출이 발생하면 다음과 같은 과정을 거칩니다. 먼저 사용자 프로그램이 시스템 호출을 요청하면, **소프트웨어 인터럽트**가 발생합니다. 이때 CPU 모드가 사용자 모드에서 커널 모드로 전환되고, 현재 실행 컨텍스트가 저장됩니다.

운영체제는 **시스템 호출 테이블**을 참조하여 해당하는 커널 함수를 찾아 실행합니다. 요청된 작업이 완료되면 결과를 사용자 프로그램에 반환하고, CPU 모드를 다시 사용자 모드로 전환한 후 원래 프로그램의 실행을 재개합니다.

### 시스템 호출의 분류

**프로세스 관리** 시스템 호출은 프로세스의 생성, 종료, 실행을 담당합니다. 프로세스 간 통신과 동기화 기능도 포함됩니다.

**파일 시스템** 시스템 호출은 파일과 디렉터리의 생성, 삭제, 읽기, 쓰기 등의 작업을 처리합니다. 파일 권한 관리와 메타데이터 조작도 이 범주에 속합니다.

**메모리 관리** 시스템 호출은 동적 메모리 할당과 해제, 메모리 보호, 가상 메모리 관리를 담당합니다.

**입출력 관리** 시스템 호출은 디바이스 드라이버와의 인터페이스를 제공하여 하드웨어 장치와의 통신을 가능하게 합니다.

**네트워크 통신** 시스템 호출은 소켓 생성, 연결 설정, 데이터 송수신 등의 네트워크 관련 작업을 처리합니다.

### 시스템 호출의 성능 고려사항

시스템 호출은 모드 전환 오버헤드를 수반합니다. 사용자 모드에서 커널 모드로의 전환과 컨텍스트 저장/복원 과정에서 상당한 시간이 소요될 수 있습니다. 따라서 빈번한 시스템 호출은 성능 저하의 원인이 될 수 있으며, 가능한 한 시스템 호출 횟수를 최소화하는 것이 중요합니다.

**버퍼링 기법**을 사용하여 여러 개의 작은 입출력 요청을 하나의 큰 요청으로 합치거나, **비동기 시스템 호출**을 통해 블로킹 없이 작업을 수행할 수 있습니다.

### 가상화와 시스템 호출

가상화 환경에서는 **하이퍼바이저**가 추가적인 추상화 계층을 제공합니다. 게스트 운영체제의 시스템 호출은 하이퍼바이저를 거쳐 호스트 시스템으로 전달되며, 이 과정에서 추가적인 오버헤드가 발생할 수 있습니다.

**파라가상화**나 **하드웨어 지원 가상화** 기술을 통해 이런 오버헤드를 최소화할 수 있으며, 컨테이너 기술은 커널을 공유하여 시스템 호출 성능을 향상시킵니다.
