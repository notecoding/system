# 리눅스 파일 시스템 구조

## 리눅스 파일 시스템 개요

리눅스 파일 시스템은 계층적 디렉터리 구조를 가지며, 모든 것을 파일로 취급하는 **"Everything is a file"** 철학을 따릅니다. 최상위 루트 디렉터리(/)를 시작점으로 하여 트리 형태의 구조를 이루며, 각 디렉터리는 특정한 목적과 역할을 가지고 있습니다.

## 주요 디렉터리 구조

### / (루트 디렉터리)
파일 시스템의 최상위 디렉터리로, 모든 다른 디렉터리와 파일의 시작점입니다. 시스템의 모든 경로는 루트 디렉터리에서 시작되며, 절대 경로는 항상 "/"로 시작합니다.

### /bin (Essential User Binaries)
시스템 부팅과 기본적인 사용자 명령에 필요한 필수 실행 파일들이 저장됩니다. ls, cp, mv, cat, bash 등 가장 기본적인 명령어들이 위치하며, 단일 사용자 모드에서도 사용할 수 있어야 하는 프로그램들이 포함됩니다.

### /sbin (System Binaries)
시스템 관리자가 사용하는 시스템 관리 도구들이 저장됩니다. 주로 root 권한이 필요한 명령어들로 구성되어 있으며, 시스템 부팅, 복구, 네트워크 설정 등에 사용되는 프로그램들이 포함됩니다.

### /etc (Configuration Files)
시스템 전체의 설정 파일들이 저장되는 디렉터리입니다. 사용자별 설정이 아닌 시스템 차원의 설정 정보들이 위치하며, passwd, fstab, hosts, crontab 등의 중요한 설정 파일들이 포함됩니다.

### /home (User Home Directories)
일반 사용자들의 홈 디렉터리가 위치합니다. 각 사용자는 /home/username 형태의 개인 디렉터리를 가지며, 사용자의 개인 파일과 개인 설정 파일들이 저장됩니다.

### /root (Root User Home)
시스템 관리자(root) 계정의 홈 디렉터리입니다. 보안상의 이유로 /home이 아닌 별도의 위치에 존재하며, 시스템 관리와 관련된 파일들이 저장됩니다.

### /usr (User System Resources)
사용자가 설치한 프로그램들과 시스템 자원들이 저장됩니다. /usr/bin에는 일반 사용자 프로그램들이, /usr/sbin에는 시스템 관리 프로그램들이, /usr/lib에는 라이브러리들이 위치합니다.

### /var (Variable Data)
시스템 운영 중에 변경되는 데이터들이 저장됩니다. 로그 파일(/var/log), 스풀 디렉터리(/var/spool), 임시 파일(/var/tmp), 캐시(/var/cache) 등이 포함됩니다.

### /tmp (Temporary Files)
임시 파일들이 저장되는 디렉터리로, 시스템 재부팅 시 내용이 삭제될 수 있습니다. 모든 사용자가 읽기/쓰기 권한을 가지지만, sticky bit가 설정되어 파일 소유자만 삭제할 수 있습니다.

### /opt (Optional Software)
추가로 설치된 소프트웨어 패키지들이 저장됩니다. 주로 벤더에서 제공하는 상용 소프트웨어나 큰 애플리케이션 패키지들이 위치합니다.

## 가상 파일 시스템

### /proc (Process Information)
실행 중인 프로세스와 커널 정보를 파일 형태로 제공하는 가상 파일 시스템입니다. 실제 디스크에 저장되지 않으며, 커널이 동적으로 생성하는 정보를 포함합니다. 프로세스 정보, 시스템 상태, 하드웨어 정보 등을 확인할 수 있습니다.

### /sys (System Information)
커널과 하드웨어에 대한 정보를 제공하는 가상 파일 시스템입니다. 디바이스 드라이버, 커널 모듈, 하드웨어 장치에 대한 세부 정보를 파일 형태로 표현합니다.

### /dev (Device Files)
하드웨어 장치에 접근하기 위한 장치 파일들이 위치합니다. 블록 장치, 문자 장치, 특수 장치 등이 파일 형태로 표현되며, 실제 하드웨어와의 인터페이스 역할을 수행합니다.

## 파일 시스템 타입

### 전통적인 파일 시스템
**ext4**는 리눅스에서 가장 널리 사용되는 파일 시스템으로, 저널링 기능을 제공하여 시스템 크래시 시 데이터 무결성을 보장합니다. 대용량 파일과 파티션을 지원하며, 우수한 성능과 안정성을 제공합니다.

**XFS**는 고성능 저널링 파일 시스템으로, 대용량 파일과 높은 처리량을 요구하는 환경에 적합합니다. 동적 할당과 확장성이 뛰어나며, 병렬 처리에 최적화되어 있습니다.

### 차세대 파일 시스템
**Btrfs**는 고급 기능을 제공하는 copy-on-write 파일 시스템입니다. 스냅샷, 압축, 중복 제거, 체크섬 검증 등의 기능을 내장하고 있어 데이터 무결성과 관리 효율성을 크게 향상시킵니다.

**ZFS**는 통합 파일 시스템 및 볼륨 매니저로, 데이터 무결성, 압축, 스냅샷, RAID 기능을 통합 제공합니다. 엔터프라이즈 환경에서 높은 신뢰성을 요구하는 경우에 사용됩니다.

## 마운트와 파일 시스템 관리

### 마운트 개념
리눅스에서는 파일 시스템을 사용하기 전에 디렉터리 트리의 특정 지점에 **마운트**해야 합니다. 마운트는 물리적 저장 장치를 논리적 디렉터리 구조에 연결하는 과정입니다.

### /etc/fstab
시스템 부팅 시 자동으로 마운트될 파일 시스템들의 정보를 담고 있는 설정 파일입니다. 장치명, 마운트 포인트, 파일 시스템 타입, 마운트 옵션 등을 정의합니다.

### 동적 마운트
최근의 리눅스 시스템은 USB 드라이브, CD/DVD 등의 이동식 미디어를 자동으로 감지하고 마운트하는 기능을 제공합니다. udev와 같은 시스템이 하드웨어 변화를 감지하여 동적으로 장치 파일을 생성하고 관리합니다.

## 권한과 보안

### 파일 권한 시스템
리눅스는 소유자(owner), 그룹(group), 기타(others)에 대해 읽기(read), 쓰기(write), 실행(execute) 권한을 개별적으로 설정할 수 있습니다. 이를 통해 세밀한 접근 제어가 가능합니다.

### 특수 권한
**SetUID**는 실행 시 파일 소유자의 권한으로 실행되도록 하며, **SetGID**는 그룹 권한으로 실행되도록 합니다. **Sticky bit**는 공용 디렉터리에서 파일 소유자만 삭제할 수 있도록 제한합니다.

### Access Control List (ACL)
전통적인 권한 시스템을 확장하여 더 세밀한 권한 제어를 가능하게 합니다. 특정 사용자나 그룹에 대해 개별적으로 권한을 설정할 수 있어 복잡한 권한 요구사항을 만족시킬 수 있습니다.

## 성능과 최적화

### 디스크 I/O 스케줄링
리눅스 커널은 여러 I/O 스케줄러를 제공하여 디스크 접근 패턴을 최적화합니다. CFQ, Deadline, NOOP 등의 스케줄러가 있으며, 시스템의 용도에 따라 적절한 스케줄러를 선택할 수 있습니다.

### 캐싱과 버퍼링
커널은 자주 사용되는 파일 데이터와 메타데이터를 메모리에 캐시하여 성능을 향상시킵니다. 페이지 캐시와 버퍼 캐시를 통해 디스크 I/O 횟수를 줄이고 응답 시간을 단축시킵니다.
